<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Goosepedia - The definitive archive associated with the waterfowl: The Goose.">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';">
    <title>Goose - Goosepedia</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- Simple Navbar -->
    <nav class="navbar">
        <a href="index.html" class="logo">ü™ø Goosepedia</a>
        <ul class="nav-menu">
            <li><a href="index.html" class="nav-link">Home</a></li>
            <li><a href="anatomy.html" class="nav-link">Anatomy</a></li>
            <li><a href="diet.html" class="nav-link">Diet</a></li>
            <li><button id="help-link" class="nav-link">Help</button></li>
            <li class="settings-dropdown">
                <span class="nav-link" aria-haspopup="true">Settings ‚ñæ</span>
                <div class="dropdown-content">
                    <a href="#" class="theme-toggle">Switch Theme</a>
                </div>
            </li>
            <li><button id="openHelpModal" class="nav-link" style="background:none; border:none; cursor:pointer; font-family:inherit; font-size:inherit;">Help</button></li>
        </ul>
    </nav>

    <main class="main-content" id="mainContent">
        <!-- Welcome Section -->
        <header class="welcome-box">
            <h2>Welcome to Goosepedia</h2>
            <p>The definitive archive dedicated to the world's most misunderstood waterfowl: The Goose. Learn about their anatomy, diet, and social lives.</p>
        </header>

        <h1>Goose</h1>
        <div class="site-sub">From Goosepedia, the free encyclopedia</div>

        <aside class="infobox">
            <div class="placeholder">
                <pre class="ascii-art">
      __
  __( o)>
  \___)
                </pre>
            </div>
            <table>
                <tr>
                    <th colspan="2" class="goose-header">Goose</th>
                </tr>
                <tr>
                    <th>Kingdom:</th>
                    <td>Animalia</td>
                </tr>
                <tr>
                    <th>Phylum:</th>
                    <td>Chordata</td>
                </tr>
                <tr>
                    <th>Class:</th>
                    <td>Aves</td>
                </tr>
                <tr>
                    <th>Order:</th>
                    <td>Anseriformes</td>
                </tr>
                <tr>
                    <th>Family:</th>
                    <td>Anatidae</td>
                </tr>
            </table>
        </aside>

        <section>
            <p>A <b>goose</b> (plural <b>geese</b>) is a bird of any of several waterfowl species in the family Anatidae.
                This group comprises the genera <i>Anser</i> (the grey geese and white geese) and <i>Branta</i> (the black
                geese). Some other birds, mostly related to the shelducks, have "goose" as part of their names. Geese are renowned for their intelligence, social bonds, and impressive migration capabilities.</p>

            <p>Geese occur in North America, Europe, and Asia. Some species are also found in South America, Australia, and Africa. They typically inhabit freshwater wetlands, lakes, and rivers.</p>
        </section>

        <section>
            <h2>Description</h2>
            <p>Geese are heavy-bodied waterfowl with long necks, intermediate in size between ducks and swans. They typically have humped bills which taper to a point. Their plumage often features grey, brown, black, and white coloration, and unlike many bird species, males and females are usually similar in appearance.</p>

            <p>During the breeding season, geese undergo a process called molting, where they lose their flight feathers. During this vulnerable time, they usually stay near water to escape predators.</p>
        </section>

        <section>
            <h2>Behavior</h2>

            <h3>Social Structure</h3>
            <p>Geese are monogamous, living in permanent pairs throughout the year. Family units often stay together during migration.</p>
            
            <h3>Migration</h3>
            <p>Most wild populations of geese are migratory. They are famous for flying in a distinctive V-formation during their long seasonal journeys. This formation conserves energy by reducing wind resistance for the followers and helps the flock maintain visual contact.</p>

            <h3>Communication</h3>
            <p>Geese are highly vocal birds. They use a broad range of calls, including the iconic "honk," to communicate, warn of danger, or maintain formation during flight. Hissing is a common defensive sound.</p>

            <h3>Parenting</h3>
            <p>Geese are known for their strong family values. Both parents invest heavily in raising their goslings. They are extremely protective and will aggressively drive away potential predators. Goslings learn to swim within 24 hours of hatching.</p>
        </section>

        <section>
            <h2>Relationship with Humans</h2>
            
            <h3>Domestication</h3>
            <p>Geese were domesticated thousands of years ago, providing humans with meat, eggs, and down feathers. They are excellent guards due to their aggressive nature towards strangers and loud calls.</p>

            <h3>Interactions</h3>
            <p>Many people enjoy feeding bread to geese in parks, although this is not recommended as
                it provides low nutritional value and can contribute to health problems like "angel wing" deformity.</p>

            <h3>Symbolism</h3>
            <p>In many cultures, geese symbolize fidelity and loyalty due to their monogamous nature. In ancient Rome, geese were credited with saving the city from a Gallic siege by honking an alarm in the dead of night.</p>
        </section>

        <section>
            <h2>Goose Life Simulator</h2>
            <p>Experience the life cycle of a goose! Start as an egg and grow into a majestic waterfowl.</p>
            <div class="simulator-box">
                <div id="sim-display" class="sim-display">ü•ö</div>
                <h3 id="sim-status">Stage: Egg</h3>
                <p id="sim-message">A warm egg waiting to hatch.</p>
                
                <div class="sim-controls">
                    <button id="btn-nurture">Keep Warm</button>
                    <button id="btn-feed" disabled>Feed</button>
                    <button id="btn-honk" disabled>Honk</button>
                </div>
                <div class="sim-stats">
                    Growth: <span id="sim-growth">0</span>%
                </div>
            </div>
        </section>

        <section>
            <h2>Etymology</h2>
            <p>The word "geese" comes from the Proto-Indo-European *ghans-. In Germanic languages, the root word gave Old
                English <i>g≈çs</i> with the plural <i>gƒìs</i>.</p>
        </section>

        <section>
            <h2>See also</h2>
            <ul>
                <li><a href="anatomy.html">Anatomy of a Goose</a></li>
                <li><a href="diet.html">Diet & Feeding</a></li>
            </ul>
        </section>
    </main>

    <footer>
        Goosepedia &copy; 2026. All rights reserved.
    </footer>

    <!-- Help Modal -->
    <div id="help-modal" class="modal" hidden>
        <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="help-title">
            <h2 id="help-title">Help & Accessibility</h2>
            <p>Welcome to Goosepedia! We strive to make our content accessible to everyone.</p>
            <ul>
                <li>Use <strong>Tab</strong> to navigate links.</li>
                <li>Press <strong>Esc</strong> to close this specific help window.</li>
                <li>Links are underlined when hovered or focused.</li>
            </ul>
            <button id="close-modal" class="close-btn">Close Help</button>
        </div>
    </div>

    <!-- Accessible Modal -->
    <div id="helpModal" class="modal" role="dialog" aria-labelledby="modalTitle" aria-modal="true" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Help & Accessibility</h2>
                <button id="closeHelpModal" class="close-button" aria-label="Close help dialog">&times;</button>
            </div>
            <p>Welcome to Goosepedia! Use the navigation links to explore different sections.</p>
            <p><strong>Keyboard Shortcuts:</strong></p>
            <ul>
                <li><strong>Tab:</strong> Navigate through links and interactive elements.</li>
                <li><strong>Enter/Space:</strong> Activate buttons or links.</li>
                <li><strong>Esc:</strong> Close this dialog.</li>
            </ul>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // Simulator Logic
            const sim = {
                stage: 0,
                growth: 0,
                stages: [
                    { name: 'Egg', emoji: 'ü•ö', msg: 'Waiting to hatch...', maxGrowth: 10, nurtureText: 'Keep Warm' }, 
                    { name: 'Gosling', emoji: 'üê•', msg: 'Peep peep! Hungry!', maxGrowth: 30, nurtureText: 'Pet' },
                    { name: 'Adult Goose', emoji: 'ü™ø', msg: 'Ready to defend the lake.', maxGrowth: 100, nurtureText: 'Preen' },
                    { name: 'Elder Goose', emoji: 'üëëü™ø', msg: 'The wise ruler of the park.', maxGrowth: 100, nurtureText: 'Preen' }
                ],
                
                init() {
                    const btnNurture = document.getElementById('btn-nurture');
                    const btnFeed = document.getElementById('btn-feed');
                    const btnHonk = document.getElementById('btn-honk');

                    if (btnNurture) btnNurture.addEventListener('click', () => this.grow(5));
                    if (btnFeed) btnFeed.addEventListener('click', () => this.grow(10));
                    if (btnHonk) btnHonk.addEventListener('click', () => this.honk());
                    
                    this.updateUI();
                },
                
                grow(amount) {
                    if (this.stage >= 3) return;
                    
                    this.growth += amount;
                    const currentStage = this.stages[this.stage];
                    
                    if (this.growth >= currentStage.maxGrowth) {
                        this.evolve();
                    }
                    this.updateUI();
                },
                
                evolve() {
                    this.stage++;
                    this.growth = 0;
                    
                    // Unlock/Update controls based on new stage
                    const btnFeed = document.getElementById('btn-feed');
                    const btnHonk = document.getElementById('btn-honk');
                    const btnNurture = document.getElementById('btn-nurture');
                    
                    if (this.stage === 1) { // Gosling
                        if(btnFeed) btnFeed.disabled = false;
                    }
                    if (this.stage === 2) { // Adult
                        if(btnHonk) btnHonk.disabled = false;
                    }
                },
                
                honk() {
                    const display = document.getElementById('sim-display');
                    const originalEmoji = this.stages[this.stage].emoji;
                    
                    display.textContent = 'üîä ' + originalEmoji;
                    document.getElementById('sim-message').textContent = "HONK!!";
                    
                    setTimeout(() => {
                        display.textContent = originalEmoji;
                        document.getElementById('sim-message').textContent = this.stages[this.stage].msg;
                    }, 1000);
                },
                
                updateUI() {
                    const s = this.stages[this.stage];
                    document.getElementById('sim-display').textContent = s.emoji;
                    document.getElementById('sim-status').textContent = `Stage: ${s.name}`;
                    document.getElementById('sim-message').textContent = s.msg;
                    document.getElementById('btn-nurture').textContent = s.nurtureText;
                    
                    if (this.stage < 3) {
                         const percent = Math.min(100, Math.round((this.growth / s.maxGrowth) * 100));
                         document.getElementById('sim-growth').textContent = percent;
                    } else {
                         document.getElementById('sim-growth').textContent = "MAX";
                         document.getElementById('btn-nurture').disabled = true;
                         document.getElementById('btn-feed').disabled = true;
                         document.getElementById('sim-message').textContent = "You have reached peak goose.";
                    }
                }
            };
            
            // Initialize simulator if elements exist
            if(document.getElementById('sim-display')) {
                sim.init();
            }

            // --- Existing Help Modal Logic ---

            const modal = document.getElementById('helpModal');
            const openBtn = document.getElementById('openHelpModal');
            const closeBtn = document.getElementById('closeHelpModal');
            let lastFocusedElement;

            function openModal() {
                lastFocusedElement = document.activeElement;
                modal.classList.add('open');
                modal.setAttribute('aria-hidden', 'false');
                document.body.style.overflow = 'hidden'; // Prevent background scrolling
                
                // Focus on the close button initially
                closeBtn.focus();
            }

            function closeModal() {
                modal.classList.remove('open');
                modal.setAttribute('aria-hidden', 'true');
                document.body.style.overflow = ''; // Restore scrolling
                
                if (lastFocusedElement) {
                    lastFocusedElement.focus();
                }
            }

            if (openBtn) {
                openBtn.addEventListener('click', openModal);
            }

            if (closeBtn) {
                closeBtn.addEventListener('click', closeModal);
            }

            // Close on outside click
            window.addEventListener('click', (event) => {
                if (event.target === modal) {
                    closeModal();
                }
            });

            // Keyboard navigation
            modal.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    closeModal();
                }

                if (e.key === 'Tab') {
                    const focusableElements = modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
                    const firstElement = focusableElements[0];
                    const lastElement = focusableElements[focusableElements.length - 1];

                    if (e.shiftKey) { /* shift + tab */
                        if (document.activeElement === firstElement) {
                            lastElement.focus();
                            e.preventDefault();
                        }
                    } else { /* tab */
                        if (document.activeElement === lastElement) {
                            firstElement.focus();
                            e.preventDefault();
                        }
                    }
                }
            });
        });
    </script>
    <script>
        (function() {
            let intervalId = null;
            
            function createGeese() {
                // CLEAR INTERVAL TO PREVENT MEMORY LEAK
                if (intervalId) {
                    clearInterval(intervalId);
                    intervalId = null;
                }

                // Remove existing geese if any
                const existingContainer = document.getElementById('geese-container');
                if (existingContainer) {
                    existingContainer.remove();
                }

                const container = document.createElement('div');
                container.id = 'geese-container';
                // Styles moved to CSS #geese-container
                document.body.appendChild(container);

                const geese = [];
                for(let i = 0; i < 500; i++) {
                    const goose = document.createElement('div');
                    goose.textContent = 'ü™ø';
                    goose.classList.add('goose');
                    
                    // Initial random positions
                    const x = Math.random() * 100;
                    const y = Math.random() * 100;

                    // Set CSS variables for position
                    goose.style.setProperty('--x', x + 'vw');
                    goose.style.setProperty('--y', y + 'vh');
                    
                    container.appendChild(goose);
                    geese.push({
                        el: goose,
                        x: x,
                        y: y,
                        dx: (Math.random() - 0.5) * 2,
                        dy: (Math.random() - 0.5) * 2
                    });
                }

                intervalId = setInterval(() => {
                    geese.forEach(g => {
                        // Update position
                        g.x += g.dx;
                        g.y += g.dy;
                        
                        // Wrap around screen
                        if (g.x < -5) g.x = 105;
                        if (g.x > 105) g.x = -5;
                        if (g.y < -5) g.y = 105;
                        if (g.y > 105) g.y = -5;
                        
                        // Update CSS variables
                        g.el.style.setProperty('--x', g.x + 'vw');
                        g.el.style.setProperty('--y', g.y + 'vh');
                    });
                }, 50);
            }

            createGeese();

            // Expose for theme changes to safely restart
            window.createGeese = createGeese;
        })();
    </script>
</body>
</html>